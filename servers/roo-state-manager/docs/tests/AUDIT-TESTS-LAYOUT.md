# Audit Complet de l'Arborescence des Tests

**Date d'audit** : 2025-10-02 09:42:11  
**Répertoire analysé** : `D:\dev\roo-extensions\mcps\internal\servers\roo-state-manager`

---

## 📊 Statistiques Globales

| Métrique | Valeur |
|----------|--------|
| **Fichiers de tests totaux** | 59 |
| **Tests individuels** | 435 |
| **Suites de tests** | 139 |
| **Taille totale** | 0.41 MB |

---

## 📁 Répartition par Répertoire

### 📂 `src`

**Fichiers** : 7 | **Tests** : 16 | **Suites** : 3 | **Taille** : 36.99 KB

| Fichier | Tests | Suites | Taille (KB) | Dernière Modif | Statut |
|---------|-------|--------|-------------|----------------|--------|
| `index.test.ts` | 9 | 3 | 5.09 | 2025-09-21 | ✅ ACTIF |
| `test-detail-levels.ts` | 5 | 0 | 8.58 | 2025-09-21 | ✅ ACTIF |
| `test-enhanced-integration.ts` | 0 | 0 | 4.66 | 2025-09-21 | ✅ ACTIF |
| `test-hierarchy-fix.ts` | 2 | 0 | 8.23 | 2025-09-24 | ✅ ACTIF |
| `test-hierarchy-limited.ts` | 0 | 0 | 4.94 | 2025-09-24 | ✅ ACTIF |
| `test-hierarchy-reconstruction.ts` | 0 | 0 | 4.77 | 2025-09-24 | ✅ ACTIF |
| `test-strategy-refactoring.js` | 0 | 0 | 0.72 | 2025-09-21 | ✅ ACTIF |

### 📂 `src\__tests__`

**Fichiers** : 1 | **Tests** : 28 | **Suites** : 10 | **Taille** : 17.29 KB

| Fichier | Tests | Suites | Taille (KB) | Dernière Modif | Statut |
|---------|-------|--------|-------------|----------------|--------|
| `UnifiedApiGateway.test.ts` | 28 | 10 | 17.29 | 2025-10-01 | ✅ ACTIF |

### 📂 `tests`

**Fichiers** : 29 | **Tests** : 221 | **Suites** : 65 | **Taille** : 178.48 KB

| Fichier | Tests | Suites | Taille (KB) | Dernière Modif | Statut |
|---------|-------|--------|-------------|----------------|--------|
| `bom-handling.test.d.ts` | 0 | 0 | 0.06 | 2025-09-21 | ✅ ACTIF |
| `bom-handling.test.js` | 3 | 1 | 2.66 | 2025-09-21 | ✅ ACTIF |
| `bom-handling.test.ts` | 3 | 1 | 2.69 | 2025-09-21 | ✅ ACTIF |
| `hierarchy-real-data.test.ts` | 3 | 1 | 9.38 | 2025-09-28 | ✅ ACTIF |
| `hierarchy-reconstruction-engine.test.ts` | 31 | 7 | 27.09 | 2025-10-02 | ✅ ACTIF |
| `hierarchy-reconstruction.test.ts` | 3 | 3 | 8.83 | 2025-09-30 | ✅ ACTIF |
| `integration.test.ts` | 18 | 5 | 25.96 | 2025-10-01 | ✅ ACTIF |
| `manage-mcp-settings.test.d.ts` | 0 | 0 | 0.06 | 2025-09-21 | ✅ ACTIF |
| `manage-mcp-settings.test.js` | 2 | 1 | 1.79 | 2025-09-21 | ✅ ACTIF |
| `manage-mcp-settings.test.ts` | 2 | 1 | 1.76 | 2025-09-21 | ✅ ACTIF |
| `read-vscode-logs.test.d.ts` | 0 | 0 | 0.06 | 2025-09-21 | ✅ ACTIF |
| `read-vscode-logs.test.js` | 5 | 1 | 3.97 | 2025-09-21 | ✅ ACTIF |
| `read-vscode-logs.test.ts` | 5 | 1 | 3.71 | 2025-09-21 | ✅ ACTIF |
| `roo-storage-detector.test.ts` | 6 | 1 | 6.15 | 2025-09-27 | ✅ ACTIF |
| `task-instruction-index.test.ts` | 51 | 16 | 25.26 | 2025-09-30 | ✅ ACTIF |
| `task-navigator.test.d.ts` | 0 | 0 | 0.06 | 2025-09-21 | ✅ ACTIF |
| `task-navigator.test.js` | 10 | 4 | 4.94 | 2025-09-21 | ✅ ACTIF |
| `task-navigator.test.ts` | 10 | 4 | 4.9 | 2025-09-21 | ✅ ACTIF |
| `task-tree-integration.test.js` | 6 | 1 | 7.59 | 2025-09-06 | ✅ ACTIF |
| `timestamp-parsing.test.d.ts` | 0 | 0 | 0.06 | 2025-09-21 | ✅ ACTIF |
| `timestamp-parsing.test.js` | 4 | 1 | 3.34 | 2025-09-21 | ✅ ACTIF |
| `timestamp-parsing.test.ts` | 4 | 1 | 3.32 | 2025-09-21 | ✅ ACTIF |
| `versioning.test.d.ts` | 0 | 0 | 0.05 | 2025-09-21 | ✅ ACTIF |
| `versioning.test.js` | 1 | 1 | 0.64 | 2025-09-21 | ✅ ACTIF |
| `versioning.test.ts` | 1 | 1 | 0.6 | 2025-09-21 | ✅ ACTIF |
| `view-conversation-tree.test.d.ts` | 0 | 0 | 0.07 | 2025-09-21 | ✅ ACTIF |
| `view-conversation-tree.test.js` | 10 | 1 | 7.55 | 2025-09-21 | ✅ ACTIF |
| `view-conversation-tree.test.ts` | 10 | 1 | 7.8 | 2025-09-21 | ✅ ACTIF |
| `xml-parsing.test.ts` | 33 | 11 | 18.13 | 2025-09-22 | ✅ ACTIF |

### 📂 `tests\e2e`

**Fichiers** : 9 | **Tests** : 22 | **Suites** : 8 | **Taille** : 33.46 KB

| Fichier | Tests | Suites | Taille (KB) | Dernière Modif | Statut |
|---------|-------|--------|-------------|----------------|--------|
| `placeholder.test.d.ts` | 0 | 0 | 0.06 | 2025-09-21 | ✅ ACTIF |
| `placeholder.test.js` | 1 | 1 | 0.18 | 2025-09-21 | ✅ ACTIF |
| `placeholder.test.ts` | 1 | 1 | 0.12 | 2025-09-21 | ✅ ACTIF |
| `semantic-search.test.d.ts` | 0 | 0 | 0.06 | 2025-09-21 | ✅ ACTIF |
| `semantic-search.test.js` | 5 | 2 | 11.2 | 2025-09-21 | ✅ ACTIF |
| `semantic-search.test.ts` | 5 | 2 | 11.14 | 2025-09-21 | ✅ ACTIF |
| `task-navigation.test.d.ts` | 0 | 0 | 0.06 | 2025-09-21 | ✅ ACTIF |
| `task-navigation.test.js` | 5 | 1 | 5.19 | 2025-09-21 | ✅ ACTIF |
| `task-navigation.test.ts` | 5 | 1 | 5.45 | 2025-09-21 | ✅ ACTIF |

### 📂 `tests\integration`

**Fichiers** : 1 | **Tests** : 10 | **Suites** : 0 | **Taille** : 6.6 KB

| Fichier | Tests | Suites | Taille (KB) | Dernière Modif | Statut |
|---------|-------|--------|-------------|----------------|--------|
| `indexing-validation.test.js` | 10 | 0 | 6.6 | 2025-09-27 | ✅ ACTIF |

### 📂 `tests\services`

**Fichiers** : 4 | **Tests** : 56 | **Suites** : 30 | **Taille** : 64.83 KB

| Fichier | Tests | Suites | Taille (KB) | Dernière Modif | Statut |
|---------|-------|--------|-------------|----------------|--------|
| `anti-leak-protections.test.ts` |  |  | 0 | 2025-09-21 | ⚠️ VIDE |
| `indexing-decision.test.ts` | 16 | 9 | 10.59 | 2025-09-27 | ✅ ACTIF |
| `synthesis.service.test.ts` | 24 | 18 | 39.49 | 2025-09-21 | ✅ ACTIF |
| `task-indexer.test.ts` | 16 | 3 | 14.75 | 2025-09-21 | ✅ ACTIF |

### 📂 `tests\unit`

**Fichiers** : 7 | **Tests** : 65 | **Suites** : 22 | **Taille** : 67.72 KB

| Fichier | Tests | Suites | Taille (KB) | Dernière Modif | Statut |
|---------|-------|--------|-------------|----------------|--------|
| `extraction-complete-validation.test.ts` | 11 | 4 | 7.83 | 2025-09-30 | ✅ ACTIF |
| `extraction-contamination.test.ts` | 4 | 1 | 2.88 | 2025-09-30 | ✅ ACTIF |
| `hierarchy-pipeline.test.ts` | 19 | 13 | 21.78 | 2025-09-30 | ✅ ACTIF |
| `main-instruction-fallback.test.ts` | 6 | 1 | 5.33 | 2025-09-30 | ✅ ACTIF |
| `new-task-extraction.test.ts` | 12 | 1 | 6.04 | 2025-09-30 | ✅ ACTIF |
| `production-format-extraction.test.ts` | 10 | 1 | 13 | 2025-10-01 | ✅ ACTIF |
| `workspace-filtering-diagnosis.test.ts` | 3 | 1 | 10.86 | 2025-09-30 | ✅ ACTIF |

### 📂 `tests\utils`

**Fichiers** : 1 | **Tests** : 17 | **Suites** : 1 | **Taille** : 11.98 KB

| Fichier | Tests | Suites | Taille (KB) | Dernière Modif | Statut |
|---------|-------|--------|-------------|----------------|--------|
| `hierarchy-inference.test.ts` | 17 | 1 | 11.98 | 2025-09-21 | ✅ ACTIF |

---

## 🔍 Analyse des Statuts
- **ACTIF** : 58 fichiers (98.3%)
- **VIDE** : 1 fichiers (1.7%)

---

## ⚠️ Fichiers Nécessitant Attention

### Fichiers Vides ou Sans Tests
- `src/test-enhanced-integration.ts` - Status: ACTIF
- `src/test-hierarchy-limited.ts` - Status: ACTIF
- `src/test-hierarchy-reconstruction.ts` - Status: ACTIF
- `src/test-strategy-refactoring.js` - Status: ACTIF
- `tests/bom-handling.test.d.ts` - Status: ACTIF
- `tests/manage-mcp-settings.test.d.ts` - Status: ACTIF
- `tests/read-vscode-logs.test.d.ts` - Status: ACTIF
- `tests/task-navigator.test.d.ts` - Status: ACTIF
- `tests/timestamp-parsing.test.d.ts` - Status: ACTIF
- `tests/versioning.test.d.ts` - Status: ACTIF
- `tests/view-conversation-tree.test.d.ts` - Status: ACTIF
- `tests/e2e/placeholder.test.d.ts` - Status: ACTIF
- `tests/e2e/semantic-search.test.d.ts` - Status: ACTIF
- `tests/e2e/task-navigation.test.d.ts` - Status: ACTIF
- `tests/services/anti-leak-protections.test.ts` - Status: VIDE

### Fichiers Anciens (>90 jours sans modification)
*Aucun fichier ancien détecté*

### Fichiers Désactivés
*Aucun fichier désactivé détecté*

---

## 💡 Recommandations

### Organisation Actuelle

**Points Positifs** :
- Existence d'une structure partielle (tests/, tests/unit/, tests/e2e/)
- Fixtures bien organisés (tests/fixtures/)
- Tests critiques bien identifiés

**Points d'Amélioration** :
1. **Tests dispersés** : Certains tests sont à la racine de tests/ alors qu'ils pourraient être catégorisés
2. **Tests dans src/** : Présence de fichiers test-*.ts qui devraient être dans tests/
3. **Fichiers compilés** : Présence de .js et .d.ts compilés dans tests/ (pollution)
4. **Nomenclature** : Mélange de conventions (.test.ts vs test-*.ts)

### Actions Recommandées

1. **Nettoyer les fichiers compilés** : Déplacer build vers un répertoire séparé
2. **Consolider les tests** : Déplacer tous les tests de src/ vers tests/
3. **Standardiser la nomenclature** : Utiliser uniquement *.test.ts
4. **Archiver les tests obsolètes** : Créer tests/archive/ pour les anciens tests
5. **Améliorer la catégorisation** : Utiliser tests/unit/, tests/integration/, tests/e2e/ de manière systématique

---

## 📋 Liste Complète des Fichiers

| # | Chemin Complet | Tests | Suites | Taille | Modif | Statut |
|---|----------------|-------|--------|--------|-------|--------|
| 1 | `src/index.test.ts` | 9 | 3 | 5.09 KB | 2025-09-21 | ✅ ACTIF |
| 2 | `src/test-detail-levels.ts` | 5 | 0 | 8.58 KB | 2025-09-21 | ✅ ACTIF |
| 3 | `src/test-enhanced-integration.ts` | 0 | 0 | 4.66 KB | 2025-09-21 | ✅ ACTIF |
| 4 | `src/test-hierarchy-fix.ts` | 2 | 0 | 8.23 KB | 2025-09-24 | ✅ ACTIF |
| 5 | `src/test-hierarchy-limited.ts` | 0 | 0 | 4.94 KB | 2025-09-24 | ✅ ACTIF |
| 6 | `src/test-hierarchy-reconstruction.ts` | 0 | 0 | 4.77 KB | 2025-09-24 | ✅ ACTIF |
| 7 | `src/test-strategy-refactoring.js` | 0 | 0 | 0.72 KB | 2025-09-21 | ✅ ACTIF |
| 8 | `src/__tests__/UnifiedApiGateway.test.ts` | 28 | 10 | 17.29 KB | 2025-10-01 | ✅ ACTIF |
| 9 | `tests/bom-handling.test.d.ts` | 0 | 0 | 0.06 KB | 2025-09-21 | ✅ ACTIF |
| 10 | `tests/bom-handling.test.js` | 3 | 1 | 2.66 KB | 2025-09-21 | ✅ ACTIF |
| 11 | `tests/bom-handling.test.ts` | 3 | 1 | 2.69 KB | 2025-09-21 | ✅ ACTIF |
| 12 | `tests/hierarchy-real-data.test.ts` | 3 | 1 | 9.38 KB | 2025-09-28 | ✅ ACTIF |
| 13 | `tests/hierarchy-reconstruction-engine.test.ts` | 31 | 7 | 27.09 KB | 2025-10-02 | ✅ ACTIF |
| 14 | `tests/hierarchy-reconstruction.test.ts` | 3 | 3 | 8.83 KB | 2025-09-30 | ✅ ACTIF |
| 15 | `tests/integration.test.ts` | 18 | 5 | 25.96 KB | 2025-10-01 | ✅ ACTIF |
| 16 | `tests/manage-mcp-settings.test.d.ts` | 0 | 0 | 0.06 KB | 2025-09-21 | ✅ ACTIF |
| 17 | `tests/manage-mcp-settings.test.js` | 2 | 1 | 1.79 KB | 2025-09-21 | ✅ ACTIF |
| 18 | `tests/manage-mcp-settings.test.ts` | 2 | 1 | 1.76 KB | 2025-09-21 | ✅ ACTIF |
| 19 | `tests/read-vscode-logs.test.d.ts` | 0 | 0 | 0.06 KB | 2025-09-21 | ✅ ACTIF |
| 20 | `tests/read-vscode-logs.test.js` | 5 | 1 | 3.97 KB | 2025-09-21 | ✅ ACTIF |
| 21 | `tests/read-vscode-logs.test.ts` | 5 | 1 | 3.71 KB | 2025-09-21 | ✅ ACTIF |
| 22 | `tests/roo-storage-detector.test.ts` | 6 | 1 | 6.15 KB | 2025-09-27 | ✅ ACTIF |
| 23 | `tests/task-instruction-index.test.ts` | 51 | 16 | 25.26 KB | 2025-09-30 | ✅ ACTIF |
| 24 | `tests/task-navigator.test.d.ts` | 0 | 0 | 0.06 KB | 2025-09-21 | ✅ ACTIF |
| 25 | `tests/task-navigator.test.js` | 10 | 4 | 4.94 KB | 2025-09-21 | ✅ ACTIF |
| 26 | `tests/task-navigator.test.ts` | 10 | 4 | 4.9 KB | 2025-09-21 | ✅ ACTIF |
| 27 | `tests/task-tree-integration.test.js` | 6 | 1 | 7.59 KB | 2025-09-06 | ✅ ACTIF |
| 28 | `tests/timestamp-parsing.test.d.ts` | 0 | 0 | 0.06 KB | 2025-09-21 | ✅ ACTIF |
| 29 | `tests/timestamp-parsing.test.js` | 4 | 1 | 3.34 KB | 2025-09-21 | ✅ ACTIF |
| 30 | `tests/timestamp-parsing.test.ts` | 4 | 1 | 3.32 KB | 2025-09-21 | ✅ ACTIF |
| 31 | `tests/versioning.test.d.ts` | 0 | 0 | 0.05 KB | 2025-09-21 | ✅ ACTIF |
| 32 | `tests/versioning.test.js` | 1 | 1 | 0.64 KB | 2025-09-21 | ✅ ACTIF |
| 33 | `tests/versioning.test.ts` | 1 | 1 | 0.6 KB | 2025-09-21 | ✅ ACTIF |
| 34 | `tests/view-conversation-tree.test.d.ts` | 0 | 0 | 0.07 KB | 2025-09-21 | ✅ ACTIF |
| 35 | `tests/view-conversation-tree.test.js` | 10 | 1 | 7.55 KB | 2025-09-21 | ✅ ACTIF |
| 36 | `tests/view-conversation-tree.test.ts` | 10 | 1 | 7.8 KB | 2025-09-21 | ✅ ACTIF |
| 37 | `tests/xml-parsing.test.ts` | 33 | 11 | 18.13 KB | 2025-09-22 | ✅ ACTIF |
| 38 | `tests/e2e/placeholder.test.d.ts` | 0 | 0 | 0.06 KB | 2025-09-21 | ✅ ACTIF |
| 39 | `tests/e2e/placeholder.test.js` | 1 | 1 | 0.18 KB | 2025-09-21 | ✅ ACTIF |
| 40 | `tests/e2e/placeholder.test.ts` | 1 | 1 | 0.12 KB | 2025-09-21 | ✅ ACTIF |
| 41 | `tests/e2e/semantic-search.test.d.ts` | 0 | 0 | 0.06 KB | 2025-09-21 | ✅ ACTIF |
| 42 | `tests/e2e/semantic-search.test.js` | 5 | 2 | 11.2 KB | 2025-09-21 | ✅ ACTIF |
| 43 | `tests/e2e/semantic-search.test.ts` | 5 | 2 | 11.14 KB | 2025-09-21 | ✅ ACTIF |
| 44 | `tests/e2e/task-navigation.test.d.ts` | 0 | 0 | 0.06 KB | 2025-09-21 | ✅ ACTIF |
| 45 | `tests/e2e/task-navigation.test.js` | 5 | 1 | 5.19 KB | 2025-09-21 | ✅ ACTIF |
| 46 | `tests/e2e/task-navigation.test.ts` | 5 | 1 | 5.45 KB | 2025-09-21 | ✅ ACTIF |
| 47 | `tests/integration/indexing-validation.test.js` | 10 | 0 | 6.6 KB | 2025-09-27 | ✅ ACTIF |
| 48 | `tests/services/anti-leak-protections.test.ts` |  |  | 0 KB | 2025-09-21 | ⚠️ VIDE |
| 49 | `tests/services/indexing-decision.test.ts` | 16 | 9 | 10.59 KB | 2025-09-27 | ✅ ACTIF |
| 50 | `tests/services/synthesis.service.test.ts` | 24 | 18 | 39.49 KB | 2025-09-21 | ✅ ACTIF |
| 51 | `tests/services/task-indexer.test.ts` | 16 | 3 | 14.75 KB | 2025-09-21 | ✅ ACTIF |
| 52 | `tests/unit/extraction-complete-validation.test.ts` | 11 | 4 | 7.83 KB | 2025-09-30 | ✅ ACTIF |
| 53 | `tests/unit/extraction-contamination.test.ts` | 4 | 1 | 2.88 KB | 2025-09-30 | ✅ ACTIF |
| 54 | `tests/unit/hierarchy-pipeline.test.ts` | 19 | 13 | 21.78 KB | 2025-09-30 | ✅ ACTIF |
| 55 | `tests/unit/main-instruction-fallback.test.ts` | 6 | 1 | 5.33 KB | 2025-09-30 | ✅ ACTIF |
| 56 | `tests/unit/new-task-extraction.test.ts` | 12 | 1 | 6.04 KB | 2025-09-30 | ✅ ACTIF |
| 57 | `tests/unit/production-format-extraction.test.ts` | 10 | 1 | 13 KB | 2025-10-01 | ✅ ACTIF |
| 58 | `tests/unit/workspace-filtering-diagnosis.test.ts` | 3 | 1 | 10.86 KB | 2025-09-30 | ✅ ACTIF |
| 59 | `tests/utils/hierarchy-inference.test.ts` | 17 | 1 | 11.98 KB | 2025-09-21 | ✅ ACTIF |

---

**Fin du rapport d'audit**

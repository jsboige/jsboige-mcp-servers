{
  "config_version": 2,
  "max_recursion_depth": 2,
  "default_agent": "analyst",
  "default_vision_agent": "vision-analyst",

  "models": [
    {
      "id": "glm-5",
      "enabled": true,
      "base_url": "https://api.z.ai/api/coding/paas/v4",
      "api_key_env": "ZAI_API_KEY",
      "api_key": "YOUR_ZAI_API_KEY_HERE",
      "model_id": "glm-5",
      "vision": false,
      "description": "GLM-5 reasoning via z.ai cloud (200K context)",
      "context_window": 200000
    },
    {
      "id": "glm-4.6v",
      "enabled": true,
      "base_url": "https://api.z.ai/api/coding/paas/v4",
      "api_key_env": "ZAI_API_KEY",
      "api_key": "YOUR_ZAI_API_KEY_HERE",
      "model_id": "glm-4.6v",
      "vision": true,
      "description": "GLM-4.6V vision via z.ai cloud (128K context)",
      "context_window": 128000
    },
    {
      "id": "zwz-8b",
      "enabled": false,
      "base_url": "https://api.mini.text-generation-webui.myia.io/v1",
      "api_key": "YOUR_MINI_API_KEY_HERE",
      "model_id": "zwz-8b",
      "vision": false,
      "description": "Fast local text model (ZwZ 8B AWQ - 131K context)",
      "context_window": 131072
    },
    {
      "id": "glm-4.7-flash",
      "enabled": false,
      "base_url": "https://api.medium.text-generation-webui.myia.io/v1",
      "api_key": "YOUR_MEDIUM_API_KEY_HERE",
      "model_id": "glm-4.7-flash",
      "vision": false,
      "description": "Fast local GLM-4.7-Flash AWQ (131K context)",
      "context_window": 131072
    },

    {
      "_comment": "=== Open WebUI custom models (Direction 2: sk-agent consumes OWUI) ===",
      "id": "owui-expert-analyste",
      "enabled": false,
      "base_url": "https://open-webui.myia.io/openai",
      "api_key": "YOUR_OWUI_API_KEY_HERE",
      "model_id": "expert-analyste",
      "vision": false,
      "description": "OWUI Expert Analyste — structured French analyst with decomposition methodology (requires OWUI API key)",
      "context_window": 131072
    },
    {
      "id": "owui-redacteur-technique",
      "enabled": false,
      "base_url": "https://open-webui.myia.io/openai",
      "api_key": "YOUR_OWUI_API_KEY_HERE",
      "model_id": "redacteur-technique",
      "vision": false,
      "description": "OWUI Rédacteur Technique — technical documentation writer (requires OWUI API key)",
      "context_window": 131072
    },
    {
      "id": "owui-vision-expert",
      "enabled": false,
      "base_url": "https://open-webui.myia.io/openai",
      "api_key": "YOUR_OWUI_API_KEY_HERE",
      "model_id": "vision-expert",
      "vision": true,
      "description": "OWUI Expert Vision — image and document analysis specialist (requires OWUI API key)",
      "context_window": 131072
    }
  ],

  "embeddings": {
    "base_url": "https://embeddings.myia.io/v1/embeddings",
    "api_key": "YOUR_EMBEDDINGS_API_KEY_HERE",
    "model_id": "qwen3-4b-awq-embedding",
    "dimensions": 2560
  },

  "qdrant": {
    "url": "https://qdrant.myia.io",
    "port": 443,
    "api_key": "YOUR_QDRANT_API_KEY_HERE",
    "default_collection_prefix": "sk-agent"
  },

  "mcps": [
    {
      "id": "searxng",
      "description": "Web search via SearXNG",
      "command": "npx",
      "args": ["-y", "mcp-searxng"],
      "env": {
        "SEARXNG_URL": "https://search.myia.io"
      }
    },
    {
      "id": "playwright",
      "description": "Browser automation and web scraping",
      "command": "npx",
      "args": ["-y", "@playwright/mcp@latest"]
    },
    {
      "id": "sk_agent",
      "description": "Self-inclusion for recursive tool chaining",
      "command": "python",
      "args": ["path/to/sk_agent.py"]
    }
  ],

  "agents": [
    {
      "_comment": "=== Core utility agents ===",
      "id": "analyst",
      "description": "General analyst with web search and persistent memory",
      "model": "glm-5",
      "system_prompt": "You are a helpful analyst with web search and memory capabilities. Use them when needed. Always respond in the same language as the user.",
      "mcps": ["searxng", "playwright"],
      "memory": {
        "enabled": true,
        "collection": "analyst-memory"
      }
    },
    {
      "id": "vision-analyst",
      "description": "Image and document analysis specialist (cloud vision model)",
      "model": "glm-4.6v",
      "system_prompt": "You are a vision analysis specialist. Describe images in detail, focusing on relevant visual elements. Be precise and thorough.",
      "mcps": ["searxng"],
      "memory": { "enabled": false }
    },
    {
      "id": "vision-local",
      "description": "Fast local vision analysis (self-hosted ZwZ model)",
      "model": "zwz-8b",
      "system_prompt": "You are a vision analysis assistant. Analyze images carefully and describe what you see. Be concise but thorough.",
      "mcps": [],
      "memory": { "enabled": false }
    },
    {
      "id": "fast",
      "description": "Quick local responses, no tools",
      "model": "glm-4.7-flash",
      "system_prompt": "Respond concisely and accurately. Always respond in the same language as the user.",
      "mcps": [],
      "memory": { "enabled": false }
    },

    {
      "_comment": "=== Deep Search conversation agents (also usable standalone) ===",
      "id": "researcher",
      "description": "Investigative researcher with web search and persistent memory for multi-source research",
      "model": "glm-5",
      "system_prompt": "You are a meticulous investigative researcher. Your methodology: decompose queries into precise sub-questions, search each independently, cross-reference multiple sources. You prioritize primary sources, official documentation, and peer-reviewed publications over blog posts and opinions. When sources conflict, you report the disagreement explicitly and assess each source's authority. Always provide complete citations with URLs. You have a knack for finding the one authoritative but overlooked source that changes the picture. Never fabricate sources — if you cannot find something, say so clearly and suggest where to look next.",
      "mcps": ["searxng", "playwright"],
      "memory": {
        "enabled": true,
        "collection": "research-memory"
      }
    },
    {
      "id": "synthesizer",
      "description": "Expert at turning complex multi-source findings into clear, structured reports",
      "model": "glm-5",
      "system_prompt": "You are an expert information synthesizer who turns chaos into clarity. Given raw research findings from multiple sources: identify the 3-5 key themes, resolve contradictions by weighing source authority and recency, organize into a logical narrative flow, and maintain full citations throughout. Your reports always start with a brief executive summary (3-4 sentences), followed by structured sections with clear headers. You flag remaining uncertainties explicitly rather than papering over gaps. Your writing is precise, well-structured, and accessible to non-specialists.",
      "mcps": [],
      "memory": { "enabled": false }
    },
    {
      "id": "critic",
      "description": "Rigorous quality reviewer who stress-tests reports for gaps and weak evidence",
      "model": "glm-4.7-flash",
      "system_prompt": "You are a rigorous quality reviewer with high standards. Your job is to stress-test reports and analyses: identify unsupported claims, logical gaps, internal contradictions, circular reasoning, and weak or outdated sources. You rate each major finding as Strong/Moderate/Weak based on evidence quality. If the work meets your standards, respond with APPROVED followed by a brief note on its strengths. Otherwise, list specific improvements needed, prioritized by severity (critical > major > minor). You are demanding but fair — you always acknowledge genuinely strong work.",
      "mcps": [],
      "memory": { "enabled": false }
    },

    {
      "_comment": "=== Deep Think conversation agents (also usable standalone) ===",
      "id": "optimist",
      "description": "Strategic optimist who identifies opportunities, upside potential, and best-case scenarios",
      "model": "glm-5",
      "system_prompt": "You are a strategic optimist with a talent for seeing opportunity where others see obstacles. You identify potential benefits, competitive advantages, best-case scenarios, and hidden upside that others miss. Your optimism is grounded in evidence and logic — you use data, historical parallels, and concrete examples to support your outlook. You acknowledge that risks exist but reframe them as manageable challenges with known mitigations. You are energetic and constructive, never naive. When you are genuinely uncertain, you say so rather than overstate the upside.",
      "mcps": [],
      "memory": { "enabled": false }
    },
    {
      "id": "devils-advocate",
      "description": "Relentless contrarian who pressure-tests ideas by finding every flaw and risk",
      "model": "glm-5",
      "system_prompt": "You are a relentless devil's advocate. Your role is to pressure-test ideas by surfacing every possible flaw, risk, hidden cost, and failure mode. You challenge unstated assumptions, cite real-world counterexamples, identify worst-case scenarios, and calculate the true costs that proponents conveniently omit. You ask the uncomfortable questions that everyone is thinking but nobody dares voice. You are intellectually rigorous, not merely cynical — when an argument genuinely withstands your scrutiny, you acknowledge its strength clearly. Your critiques are specific and actionable, not vague doom-saying.",
      "mcps": [],
      "memory": { "enabled": false }
    },
    {
      "id": "pragmatist",
      "description": "Implementation-focused realist who bridges vision and execution with practical plans",
      "model": "glm-4.7-flash",
      "system_prompt": "You are a seasoned implementation pragmatist. While others debate theoretical merits, you focus on what it would actually take to execute: realistic timelines, budget requirements, team capabilities, technical dependencies, regulatory constraints, and operational risks. You bridge the gap between optimistic vision and critical skepticism by asking 'How would we actually build this?' You identify the minimum viable path forward, the biggest practical blockers, and the first concrete step to take. You think in phases and milestones, not grand plans.",
      "mcps": [],
      "memory": { "enabled": false }
    },
    {
      "id": "mediator",
      "description": "Diplomatic synthesizer who builds consensus from competing perspectives",
      "model": "glm-5",
      "system_prompt": "You are a diplomatic mediator who builds consensus from competing perspectives. Given analyses from an optimist, a devil's advocate, and a pragmatist, you: (1) identify the points where all perspectives genuinely agree, (2) map the tensions that remain and explain why they exist, (3) weigh each perspective's strongest arguments on their merits, and (4) recommend a course of action with explicit confidence levels for each element. You are transparent about trade-offs and honest about uncertainty. Your final recommendation always includes 'what we would need to learn to be more confident' alongside 'what we can decide now'.",
      "mcps": [],
      "memory": { "enabled": false }
    },

    {
      "_comment": "=== OWUI-backed agents (Direction 2: leverage OWUI custom models with enriched system prompts) ===",
      "id": "owui-analyst",
      "description": "Expert analyst via OWUI (enriched system prompt, structured French output)",
      "model": "owui-expert-analyste",
      "system_prompt": "",
      "mcps": ["searxng"],
      "memory": {
        "enabled": true,
        "collection": "owui-analyst-memory"
      }
    },
    {
      "id": "owui-writer",
      "description": "Technical documentation writer via OWUI (enriched system prompt)",
      "model": "owui-redacteur-technique",
      "system_prompt": "",
      "mcps": [],
      "memory": { "enabled": false }
    },
    {
      "id": "owui-vision",
      "description": "Vision analysis expert via OWUI (enriched system prompt)",
      "model": "owui-vision-expert",
      "system_prompt": "",
      "mcps": [],
      "memory": { "enabled": false }
    }
  ],

  "conversations": [
    {
      "_comment": "Deep Search uses shared top-level agents (researcher, synthesizer, critic). No inline_agents needed — they are resolved from the agents array above.",
      "id": "deep-search",
      "description": "Multi-agent deep research with search, synthesis, and critical review",
      "type": "magentic",
      "agents": ["researcher", "synthesizer", "critic"],
      "max_rounds": 10
    },
    {
      "_comment": "Deep Think uses shared top-level agents. The mediator replaces the old synthesizer-dt inline agent.",
      "id": "deep-think",
      "description": "Multi-perspective deliberation with diverse viewpoints and synthesis",
      "type": "group_chat",
      "agents": ["optimist", "devils-advocate", "pragmatist", "mediator"],
      "max_rounds": 8
    },
    {
      "_comment": "Code Review uses inline agents (conversation-scoped, not shared). This pattern is useful when agents are too specialized to be useful standalone.",
      "id": "code-review",
      "description": "Multi-perspective code review with security, performance, and maintainability analysis",
      "type": "group_chat",
      "agents": ["security-reviewer", "perf-reviewer", "maintainability-reviewer", "code-synthesizer"],
      "max_rounds": 6,
      "inline_agents": [
        {
          "id": "security-reviewer",
          "description": "Security-focused code reviewer",
          "model": "glm-5",
          "system_prompt": "You are a security expert. Review code for vulnerabilities: injection, XSS, CSRF, auth flaws, data exposure. Reference OWASP Top 10. Be specific with line numbers and fix suggestions."
        },
        {
          "id": "perf-reviewer",
          "description": "Performance-focused code reviewer",
          "model": "glm-4.7-flash",
          "system_prompt": "You are a performance engineer. Analyze code for bottlenecks: O(n^2) loops, N+1 queries, memory leaks, unnecessary allocations, missing caching. Suggest concrete optimizations with expected impact."
        },
        {
          "id": "maintainability-reviewer",
          "description": "Maintainability and readability reviewer",
          "model": "glm-4.7-flash",
          "system_prompt": "You are a senior developer focused on code quality. Review for: naming clarity, SOLID principles, DRY violations, missing error handling, testability, documentation gaps. Suggest refactoring where needed."
        },
        {
          "id": "code-synthesizer",
          "description": "Synthesizes review findings into actionable summary",
          "model": "glm-5",
          "system_prompt": "Given reviews from security, performance, and maintainability perspectives: prioritize findings by severity (critical/major/minor), identify consensus issues, and produce a final actionable summary with recommended fixes in priority order."
        }
      ]
    },
    {
      "id": "research-debate",
      "description": "Research a topic from opposing viewpoints then synthesize a balanced conclusion",
      "type": "sequential",
      "agents": ["proponent", "opponent", "fact-checker", "debate-synthesizer"],
      "max_rounds": 4,
      "inline_agents": [
        {
          "id": "proponent",
          "description": "Argues in favor of the proposition",
          "model": "glm-5",
          "system_prompt": "You are a debate proponent. Build the strongest possible case FOR the given proposition. Use evidence, logic, and examples. Acknowledge weaknesses but explain why the benefits outweigh them."
        },
        {
          "id": "opponent",
          "description": "Argues against the proposition",
          "model": "glm-5",
          "system_prompt": "You are a debate opponent. Build the strongest possible case AGAINST the given proposition. Challenge assumptions, cite counterevidence, and identify risks. Be rigorous but intellectually honest."
        },
        {
          "id": "fact-checker",
          "description": "Verifies claims from both sides",
          "model": "glm-4.7-flash",
          "system_prompt": "You are a fact-checker. Review claims made by both the proponent and opponent. Identify which claims are well-supported, which are speculative, and which are misleading. Rate each major claim on a confidence scale."
        },
        {
          "id": "debate-synthesizer",
          "description": "Produces balanced conclusion from the debate",
          "model": "glm-5",
          "system_prompt": "Given arguments for and against, plus fact-checking results: produce a nuanced conclusion. Identify what is well-established, what remains uncertain, and what conditions would change the answer. Provide a clear recommendation with caveats."
        }
      ]
    }
  ],

  "system_prompt": "You are a helpful assistant with access to tools. Use them when needed. Always respond in the same language as the user."
}
